(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function D(n){return Object.keys(n).some(e=>{let r=n[e];if(!r)return!1;switch(r&&r.toParam&&(r=r.toParam()),r.constructor.name){case"Array":return!1;case"Object":return!1;case"Date":return!1;case"Function":return!1;case"Boolean":return!1;case"String":return!1;case"Number":return!1;default:return!0}})}function L(n){const e={};return Object.keys(n).forEach(r=>{var t,a;let o=n[r];if(o&&o.toParam&&(o=o.toParam()),!o&&o!==0&&typeof o!="boolean"&&typeof o!="string")return;const s=o.constructor.name;let i;switch(s){case"Array":const l=(a=(t=o[0])===null||t===void 0?void 0:t.constructor)===null||a===void 0?void 0:a.name;i=l==="Array"?o:l==="Object"?JSON.stringify(o):o.join(",");break;case"Object":i=JSON.stringify(o);break;case"Date":i=o.valueOf();break;case"Function":i=null;break;case"Boolean":i=o+"";break;default:i=o;break}(i||i===0||typeof i=="string"||Array.isArray(i))&&(e[r]=i)}),e}function j(n,e){return Array.isArray(e)&&e[0]&&Array.isArray(e[0])?e.map(r=>j(n,r)).join("&"):encodeURIComponent(n)+"="+encodeURIComponent(e)}function P(n){const e=L(n);return Object.keys(e).map(r=>j(r,e[r])).join("&")}const H=globalThis.FormData;function W(n,e){const r=D(n)||e,t=L(n);if(r){const a=new H;return Object.keys(t).forEach(o=>{if(typeof Blob<"u"&&t[o]instanceof Blob){const s=t.fileName||t[o].name||o;a.append(o,t[o],s)}else a.append(o,t[o])}),a}else return P(n)}class p extends Error{constructor(e,r,t,a,o){super(e);const s=new.target.prototype;Object.setPrototypeOf(this,s),e=e||"UNKNOWN_ERROR",r=r||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message=r==="UNKNOWN_ERROR_CODE"?e:`${r}: ${e}`,this.originalMessage=e,this.code=r,this.response=t,this.url=a,this.options=o}}function $(n){console&&console.warn&&console.warn.apply(console,[n])}function q(){return Promise.resolve({fetch:globalThis.fetch,Headers:globalThis.Headers,Response:globalThis.Response,Request:globalThis.Request})}const z="@esri/arcgis-rest-js";function X(){return globalThis.DEFAULT_ARCGIS_REQUEST_OPTIONS||{httpMethod:"POST",params:{f:"json"}}}class F extends p{constructor(e="AUTHENTICATION_ERROR",r="AUTHENTICATION_ERROR_CODE",t,a,o){super(e,r,t,a,o),this.name="ArcGISAuthError",this.message=r==="AUTHENTICATION_ERROR_CODE"?e:`${r}: ${e}`;const s=new.target.prototype;Object.setPrototypeOf(this,s)}retry(e,r=1){let t=0;const a=(o,s)=>{t=t+1,e(this.url,this.options).then(i=>{const l=Object.assign(Object.assign({},this.options),{authentication:i});return k(this.url,l)}).then(i=>{o(i)}).catch(i=>{i.name==="ArcGISAuthError"&&t<r?a(o,s):i.name===this.name&&i.message===this.message&&t>=r?s(this):s(i)})};return new Promise((o,s)=>{a(o,s)})}}function Q(n,e,r,t,a){if(n.code>=400){const{message:o,code:s}=n;throw new p(o,s,n,e,t)}if(n.error){const{message:o,code:s,messageCode:i}=n.error,l=i||s||"UNKNOWN_ERROR_CODE";throw s===498||s===499?a||new F(o,l,n,e,t):new p(o,l,n,e,t)}if(n.status==="failed"||n.status==="failure"){let o,s="UNKNOWN_ERROR_CODE";try{o=JSON.parse(n.statusMessage).message,s=JSON.parse(n.statusMessage).code}catch{o=n.statusMessage||n.message}throw new p(o,s,n,e,t)}return n}function k(n,e){const r=X(),t=Object.assign(Object.assign(Object.assign({httpMethod:"POST"},r),e),{params:Object.assign(Object.assign({},r.params),e.params),headers:Object.assign(Object.assign({},r.headers),e.headers)}),{httpMethod:a,rawResponse:o}=t,s=Object.assign({f:"json"},t.params);let i=null;const l={method:a,signal:t.signal,credentials:t.credentials||"same-origin"};t.headers&&t.headers["X-Esri-Auth-Client-Id"]&&n.indexOf("/oauth2/platformSelf")>-1&&(l.credentials="include");let c;if(typeof t.authentication=="string"){const u=t.authentication;c={portal:"https://www.arcgis.com/sharing/rest",getToken:()=>Promise.resolve(u)},!t.authentication.startsWith("AAPK")&&!t.suppressWarnings&&!globalThis.ARCGIS_REST_JS_SUPPRESS_TOKEN_WARNING&&($("Using an oAuth 2.0 access token directly in the token option is discouraged. Consider using ArcGISIdentityManager or Application session. See https://esriurl.com/arcgis-rest-js-direct-token-warning for more information."),globalThis.ARCGIS_REST_JS_SUPPRESS_TOKEN_WARNING=!0)}else c=t.authentication;const h=n;return(c?c.getToken(n).catch(u=>(u.url=n,u.options=t,i=u,Promise.resolve(""))):Promise.resolve("")).then(u=>{u.length&&(s.token=u),c&&c.getDomainCredentials&&(l.credentials=c.getDomainCredentials(n));const f={};if(l.method==="GET"){s.token&&t.hideToken&&typeof window>"u"&&(f["X-Esri-Authorization"]=`Bearer ${s.token}`,delete s.token);const x=P(s)===""?n:n+"?"+P(s);t.maxUrlLength&&x.length>t.maxUrlLength||s.token&&t.hideToken?(l.method="POST",u.length&&t.hideToken&&(s.token=u,delete f["X-Esri-Authorization"])):n=x}const d=new RegExp("/items/.+/updateResources").test(n);return l.method==="POST"&&(l.body=W(s,d)),l.headers=Object.assign(Object.assign({},f),t.headers),(typeof window>"u"||window&&typeof window.document>"u")&&!l.headers.referer&&(l.headers.referer=z),!D(s)&&!d&&(l.headers["Content-Type"]="application/x-www-form-urlencoded"),globalThis.fetch?globalThis.fetch(n,l):q().then(({fetch:I})=>I(n,l))}).then(u=>{if(!u.ok){const{status:f,statusText:d}=u;throw new p(d,`HTTP ${f}`,u,n,t)}if(o)return u;switch(s.f){case"json":return u.json();case"geojson":return u.json();case"html":return u.text();case"text":return u.text();default:return u.blob()}}).then(u=>{if((s.f==="json"||s.f==="geojson")&&!o){const f=Q(u,h,s,t,i);if(i){const d=n.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];t.authentication.federatedServers[d]={token:[],expires:new Date(Date.now()+86400*1e3)},i=null}return f}else return u})}function U(n,e={params:{f:"json"}}){return k(n,e).catch(r=>r instanceof F&&e.authentication&&typeof e.authentication!="string"&&e.authentication.canRefresh&&e.authentication.refreshCredentials?r.retry(()=>e.authentication.refreshCredentials(),1):Promise.reject(r))}function Y(n,e,r){const t=["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"],a=Object.assign(Object.assign({params:{}},r),n);return a.params=e.reduce((o,s)=>((n[s]||typeof n[s]=="boolean"||typeof n[s]=="number"&&n[s]===0)&&(o[s]=n[s]),o),a.params),t.reduce((o,s)=>(a[s]&&(o[s]=a[s]),o),{})}function G(n){return typeof n!="string"||(n=n.trim(),n[n.length-1]==="/"&&(n=n.slice(0,-1))),n}class C{constructor(e){this.portal="https://www.arcgis.com/sharing/rest",this.key=e.key}static fromKey(e){return new C({key:e})}getToken(e){return Promise.resolve(this.key)}}const S="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/";/* @preserve
* @terraformer/arcgis - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:48 GMT-0700 (Pacific Daylight Time)
*/var V=function(e,r,t,a){var o=(a[0]-t[0])*(e[1]-t[1])-(a[1]-t[1])*(e[0]-t[0]),s=(r[0]-e[0])*(e[1]-t[1])-(r[1]-e[1])*(e[0]-t[0]),i=(a[1]-t[1])*(r[0]-e[0])-(a[0]-t[0])*(r[1]-e[1]);if(i!==0){var l=o/i,c=s/i;if(l>=0&&l<=1&&c>=0&&c<=1)return!0}return!1},Z=function(e,r){for(var t=!1,a=-1,o=e.length,s=o-1;++a<o;s=a)(e[a][1]<=r[1]&&r[1]<e[s][1]||e[s][1]<=r[1]&&r[1]<e[a][1])&&r[0]<(e[s][0]-e[a][0])*(r[1]-e[a][1])/(e[s][1]-e[a][1])+e[a][0]&&(t=!t);return t},ee=function(e,r){for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0},J=function(e,r){for(var t=0;t<e.length-1;t++)for(var a=0;a<r.length-1;a++)if(V(e[t],e[t+1],r[a],r[a+1]))return!0;return!1},te=function(e){return ee(e[0],e[e.length-1])||e.push(e[0]),e},ne=function(e){var r=0,t=0,a=e.length,o=e[t],s;for(t;t<a-1;t++)s=e[t+1],r+=(s[0]-o[0])*(s[1]+o[1]),o=s;return r>=0},re=function(e){var r={};for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r},oe=function(e,r){var t=J(e,r),a=Z(e,r[0]);return!!(!t&&a)},ae=function(e){for(var r=[],t=[],a,o,s,i=0;i<e.length;i++){var l=te(e[i].slice(0));if(!(l.length<4))if(ne(l)){var c=[l.slice().reverse()];r.push(c)}else t.push(l.slice().reverse())}for(var h=[];t.length;){s=t.pop();var u=!1;for(a=r.length-1;a>=0;a--)if(o=r[a][0],oe(o,s)){r[a].push(s),u=!0;break}u||h.push(s)}for(;h.length;){s=h.pop();var f=!1;for(a=r.length-1;a>=0;a--)if(o=r[a][0],J(o,s)){r[a].push(s),f=!0;break}f||r.push([s.reverse()])}return r.length===1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}},se=function(e,r){for(var t=r?[r,"OBJECTID","FID"]:["OBJECTID","FID"],a=0;a<t.length;a++){var o=t[a];if(o in e&&(typeof e[o]=="string"||typeof e[o]=="number"))return e[o]}throw Error("No valid id attribute found")},ie=function n(e,r){var t={};if(e.features){t.type="FeatureCollection",t.features=[];for(var a=0;a<e.features.length;a++)t.features.push(n(e.features[a],r))}if(typeof e.x=="number"&&typeof e.y=="number"&&(t.type="Point",t.coordinates=[e.x,e.y],typeof e.z=="number"&&t.coordinates.push(e.z)),e.points&&(t.type="MultiPoint",t.coordinates=e.points.slice(0)),e.paths&&(e.paths.length===1?(t.type="LineString",t.coordinates=e.paths[0].slice(0)):(t.type="MultiLineString",t.coordinates=e.paths.slice(0))),e.rings&&(t=ae(e.rings.slice(0))),typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"&&(t.type="Polygon",t.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(t.type="Feature",t.geometry=e.geometry?n(e.geometry):null,t.properties=e.attributes?re(e.attributes):null,e.attributes))try{t.id=se(e.attributes,r)}catch{}return JSON.stringify(t.geometry)===JSON.stringify({})&&(t.geometry=null),e.spatialReference&&e.spatialReference.wkid&&e.spatialReference.wkid!==4326&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),t};function N(n){let e={},r;return typeof n=="string"?(e.params={singleLine:n},r=S):(r=n.endpoint||S,e=Y(n,["singleLine","address","address2","address3","neighborhood","city","subregion","region","postal","postalExt","countryCode","outFields","magicKey"],{params:Object.assign({},n.params)})),U(`${G(r)}/findAddressCandidates`,e).then(t=>{if(typeof n!="string"&&n.rawResponse)return t;const a=t.spatialReference;if(t.candidates.forEach(function(o){o.location.spatialReference=a,o.extent&&(o.extent.spatialReference=a)}),a.wkid===4326){const o=t.candidates.map(s=>({type:"Feature",geometry:ie(s.location),properties:Object.assign({address:s.address,score:s.score},s.attributes)}));t.geoJson={type:"FeatureCollection",features:o}}return t})}function le(n,e){const r=Object.assign({endpoint:S,params:{}},e);return r.params.text=n,U(`${G(r.endpoint)}/suggest`,r)}const ue="AAPK2394f0c5d5f94d839d66dd5c7864b465aGMvj0hnwlPpzy-46kAkX2VyXl9XLKm45SAz6I1POmo2SDhr_R-LrAIOx7_ntYI4",w=new C({key:ue});let A=[],g=document.getElementById("input"),m=document.getElementById("suggestions"),_=document.getElementById("apt"),M=document.getElementById("city"),B=document.getElementById("state"),v=document.getElementById("postal"),K=document.getElementById("country"),ce=document.getElementById("form"),T="",E="",b="",O="",R="",y={};g.addEventListener("input",({target:n})=>{le(n.value,{params:{maxSuggestions:5},authentication:w}).then(e=>{e.suggestions.forEach(r=>{A.push(r)}),n.value&&g.setAttribute("autocomplete","new-password"),fe(n.value)})});function fe(n){if(m.innerHTML="",n.length>0){m.style.border="1px solid gray";for(y of A){const e=document.createElement("li");e.innerHTML=y.text,e.innerText=y.text,e.classList.add(y.magicKey),e.classList.add("list-group-item-action"),e.classList.add("active"),e.addEventListener("click",r=>{g.removeAttribute("autocomplete"),e.classList.remove("active"),de(r.target.className),m.style.border="",m.innerHTML=""}),m.appendChild(e)}A=[]}}function de(n){N({magicKey:n,maxLocations:1,outFields:"*",authentication:w}).then(e=>{let r=e.candidates[0];console.log(r),r.attributes.StAddr?g.value=r.attributes.StAddr:g.value=r.attributes.ShortLabel,T=r.attributes.StAddr,E=r.attributes.City,M.value=r.attributes.City,b=r.attributes.Region,B.value=r.attributes.Region,R=r.attributes.CntryName,K.value=r.attributes.CntryName,O=r.attributes.Postal,r.attributes.PostalExt?v.value=`${r.attributes.Postal}-${r.attributes.PostalExt}`:v.value=r.attributes.Postal,v.value=r.attributes.Postal,he()})}function he(){_.addEventListener("change",n=>{n.preventDefault(),_=n.target.value}),M.addEventListener("change",n=>{n.preventDefault(),E=n.target.value}),B.addEventListener("change",n=>{n.preventDefault(),b=n.target.value}),v.addEventListener("change",n=>{n.preventDefault(),O=n.target.value}),K.addEventListener("change",n=>{n.preventDefault(),R=n.target.value}),N({address:T,city:E,region:b,postal:O,countryCode:R,authentication:w}).then(n=>{console.log(n.candidates[0].score)})}ce.addEventListener("submit",n=>{n.preventDefault(),N({address:T,city:E,region:b,postal:O,countryCode:R,authentication:w}).then(e=>{console.log(e.candidates[0]),e.candidates[0].score>99?(alert("Form accepted!"),window.location.reload(!1)):alert("Please check address!")})});
